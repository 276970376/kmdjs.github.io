<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <style>
        #preview {
            width: auto;
            height: auto;
            min-height: 300px;
            min-width: 300px;
            background-color: #eee;
            padding: 22px;
            border: 3px dashed black;
            text-align: center;
            font-size: 40px;
        }

        #demo {
            text-align: center;
        }

            #demo img {
                margin-left: 5px;
            }
    </style>
</head>
<body>
    <a href="https://github.com/AlloyTeam/AlloyGameEngine" target="_blank" style="position: absolute; right: 0; top: 0;">
        <img src="http://alloyteam.github.io/AlloyRenderingEngine/asset/img/github.png" alt="" />
    </a>
    <div style="text-align: center;">
      scale:<span id="range1Txt"></span>  <input id="range1" type="range" name="range" min="0.5" max="10" step="0.5" value="2" />
    </div>
    <div id="preview">
        <div>Drop image file here.</div>
        <canvas style="display:none;" id="canvas"></canvas>
            <canvas id="resultCanvas"></canvas>
    </div>
    <script>
   function a(d){var e=-1,f,g;return d=Math.abs(d),f=d*d,g=f*d,d<=1?(e+2)*g-(e+3)*f+1:d<=2?e*g-5*e*f+8*e*d-4*e:0};function b(d){return d<=0?0:d>=255?255:d};function c(d,e,f,g,h,i){for(var j=Math.floor(f),k=Math.floor(g),l=f-j,m=g-k,n=[],o,p,q,r=0;r<4;r++)for(q=0;q<4;q++){var w=j-1+q,x=k-1+r,y=4*(e*x+w);y<0&&(y=0);y+4>d.length&&(y=d.length-4);n[r*4+q]=[d[y],d[y+1],d[y+2],d[y+3]]};o=[];p=[];o[0]=a(1+l);o[1]=a(l);o[2]=a(1-l);o[3]=a(2-l);p[0]=a(1+m);p[1]=a(m);p[2]=a(1-m);p[3]=a(2-m);var s=0,t=0,u=0,v=0;for(r=0;r<4;++r){var w=0,x=0,y=0,z=0;for(q=0;q<4;++q)z+=o[q]*n[r*4+q][3],w+=o[q]*n[r*4+q][0],x+=o[q]*n[r*4+q][1],y+=o[q]*n[r*4+q][2];v+=z*p[r];s+=w*p[r];t+=x*p[r];u+=y*p[r]};h[i+3]=v;h[i]=s;h[i+1]=t;h[i+2]=u}(function(d){"use strict";var e=d.HTMLCanvasElement&&d.HTMLCanvasElement.prototype,f=d.Blob&&function(){try{return Boolean(new Blob)}catch(d){return!1}}(),f=f&&d.Uint8Array&&function(){try{return new Blob([new Uint8Array(100)]).size===100}catch(d){return!1}}(),u=d.BlobBuilder||d.WebKitBlobBuilder||d.MozBlobBuilder||d.MSBlobBuilder,i=(f||u)&&d.atob&&d.ArrayBuffer&&d.Uint8Array&&function(g){var h,j,k,l,m,n;for(h=g.split(",")[0].indexOf("base64")>=0?atob(g.split(",")[1]):decodeURIComponent(g.split(",")[1]),j=new ArrayBuffer(h.length),k=new Uint8Array(j),l=0;l<h.length;l+=1)k[l]=h.charCodeAt(l);return(m=g.split(",")[0].split(":")[1].split(";")[0],f)?new Blob([f?k:j],{type:m}):(n=new u,n.append(j),n.getBlob(m))};d.HTMLCanvasElement&&!e.toBlob&&(e.mozGetAsFile?e.toBlob=function(g,h,j){j&&e.toDataURL&&i?g(i(this.toDataURL(h,j))):g(this.mozGetAsFile("blob",h))}:e.toDataURL&&i&&(e.toBlob=function(g,h,j){g(i(this.toDataURL(h,j)))}));typeof define=="function"&&define.amd?define(function(){return i}):d.dataURLtoBlob=i})(this),function(){function d(){var l,m,o;canvas.a=this.a;canvas.b=this.b;resultCanvas.a=this.a*i;resultCanvas.b=this.b*i;ctx.drawImage(this,0,0);var p=ctx.getImageData(0,0,this.a,this.b).data,q=resultCtx.getImageData(0,0,resultCanvas.a,resultCanvas.b),r=q.data;for(l=0,m=r.length;l<m;l+=4){var s=l/4%resultCanvas.a,t=parseInt(l/4/resultCanvas.a),u=s/i,v=t/i;c(p,canvas.a,u,v,r,l)};resultCtx.putImageData(q,0,0);o=this.c;canvas.toBlob&&canvas.toBlob(function(s){e(s,o+".png")},"image/png");delete this.c};function e(l,m){if(window.URL.createObjectURL){var n=window.URL.createObjectURL(l),o=document.createElement("a");o.setAttribute("href",n);o.setAttribute("download",m);o.click()}};function f(){i=range1.value;range1Txt.innerHTML=i};var g={},h,i,j,k;g.byId=function(l){return document.getElementById(l)};preview=g.byId("preview");canvas=g.byId("canvas");resultCanvas=g.byId("resultCanvas");range1=g.byId("range1");range1Txt=g.byId("range1Txt");range2Txt=g.byId("range2Txt");ctx=canvas.getContext("2d");resultCtx=resultCanvas.getContext("2d");h=window.location.href;i=range1.value;range1Txt.innerHTML=i;j=function(l,m){ctx.clearRect(0,0,canvas.width,canvas.height);var n=new Image;n.onload=d;n.src=l;n.__name=m};k=function(l){if(!l.type.match(/image.*/)){console.log("The dropped file is not an image: ",l.type);return};var m=new FileReader;m.onload=function(n){j(n.target.result,l.name.split(".")[0])};m.readAsDataURL(l)};preview.addEventListener("dragover",function(l){l.preventDefault()},!0);preview.addEventListener("drop",function(l){(l.preventDefault(),h.indexOf("zoom")!=-1&&h.indexOf("ithu")!=-1&&h.indexOf("mdj")!=-1)&&k(l.dataTransfer.files[0])},!0);range1.addEventListener("mouseup",f,!1);range1.addEventListener("change",f,!1)}()
    </script>
</body>
</html>
